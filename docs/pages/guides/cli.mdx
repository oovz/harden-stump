import { Callout } from 'nextra/components'

# Command-line interface

The Stump server ships with a built-in CLI tool that allows you to manage your server from the command line

<Callout emoji="â„¹ï¸" type="info">
	Every example in this guide assumes you are running the CLI tool from the same directory as the
	executable. You will need to adjust the path to the executable accordingly if you are running it
	from a different location
</Callout>

## Basic Usage

The CLI tool is exposed via a few subcommands using the same executable as the server, itself. To see the available subcommands, run:

```bash copy
./stump --help
```

This will print the various subcommands and options available to you. To see more information about a specific subcommand, run:

```bash copy
./stump <subcommand> --help
```

## System Setup

Before using [Secure Libraries](/guides/secure-libraries), you must initialize the system:

```bash copy
./stump system setup
```

This command:

1. Runs any pending database migrations
2. Generates the **System Master Key (SMK)** and displays it once
3. Creates the first server owner user with an X25519 keypair
4. Inserts the initialization sentinel in the database

<Callout type="error">
	**Save the SMK securely!** It is displayed only once and cannot be recovered. You need it to create secure libraries and grant user access.
</Callout>

After running setup, you can start the server normally. The server will refuse to start until setup has been completed.

## Account Management

### Locking a user account

To lock a user account, run:

```bash copy
./stump account lock --username <username>
```

### Unlocking a user account

To unlock a user account, run:

```bash copy
./stump account unlock --username <username>
```

### Resetting a user's password

To reset a user's password, run:

```bash copy
./stump account reset-password --username <username>
```

You will be prompted to enter a new password, with a confirmation prompt to ensure you entered it correctly. The password will be hashed and salted and stored in the database to replace the existing one.

<Callout type="warning">
	**Secure Library impact:** If the user has access to [Secure Libraries](/guides/secure-libraries), an admin password reset will:
	- Clear their X25519 keypair (a new one will be generated on next login)
	- Revoke all their secure library access grants
	- Invalidate all their sessions

	After a password reset, the user must be re-granted access to any secure libraries by the server owner.
</Callout>

<Callout emoji="ðŸ“¢">
	The CLI only contains user-management commands at this time. If you have any ideas for new
	commands or features, please create a [feature
	request](https://github.com/stumpapp/stump/issues/new/choose) on GitHub
</Callout>
